<aside class="sidebar sticky">
    <nav class="toc" markdown="1">
        <header><h2 class="nav__title"><i class="fa fa-{{ include.icon | default: 'file-text' }}"></i> {{ include.title | default: site.data.ui-text[site.locale].toc_label }}</h2></header>
        <div class="toc__menu">
            {% assign headings = include.content | split: '<h' %}
            
            {% if headings.size > 1 %}
                <ul class="toc-list">
                {% for fragment in headings %}
                {% unless forloop.first %}
                    {% if fragment contains 'id="' %}
                    {% assign level_char = fragment | slice: 0 %}
                    {% assign level = level_char | plus: 0 %}
                    
                    {% if level >= 1 and level <= 6 %}
                        {% assign id_start = fragment | split: 'id="' | last %}
                        {% assign id = id_start | split: '"' | first %}
                        
                        {% assign text1 = fragment | split: '>' | last | split: '</h' | first %}
                        {% assign text2 = fragment | remove: '<h' | remove: 'id="' | split: '">' | last | split: '</h' | first %}
                        
                        {% assign final_text = text1 | default: text2 | strip_html | strip %}
                        
                        <li class="toc-level-{{ level }}">
                        <a href="#{{ id }}">
                            {% if final_text != "" %}
                            {{ final_text }}
                            {% else %}
                            标题 {{ forloop.index0 }}
                            {% endif %}
                        </a>
                        </li>
                    {% endif %}
                    {% endif %}
                {% endunless %}
                {% endfor %}
                </ul>
            {% else %}
                <p class="toc-empty">No contents</p>
            {% endif %}
        </div>
    </nav>
</aside>