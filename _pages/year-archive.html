---
layout: archive
permalink: /news/
title: "News"
titleshow: false
author_profile: false
toc: false
redirect_from:
  - /news/year/
---

{% include base_path %}

{% assign posts_by_year = site.posts | group_by_exp: "post", "post.date | date: '%Y'" | sort: "name" | reverse %}

<!-- 仅显示标签，用于测试 -->
<div class="year-archive-sidebar-filter" style="position: fixed; left: 0; top: 100px; width: 280px; background: #f8f9fa; padding: 15px; border: 1px solid #e9ecef; z-index: 1000;">
  <h3>Filter by Tags</h3>
  <div class="filter-section">
    {% assign all_tags = "" | split: "," %}
    {% for post in site.posts %}
      {% if post.tags %}
        {% for tag in post.tags %}
          {% assign tag_parts = tag | split: ":" %}
          {% if tag_parts.size >= 2 %}
            {% assign category = tag_parts[0] | strip %}
            {% assign value = tag_parts[1] | strip %}
            {% capture tag_entry %}{{ category }}|{{ value }}{% endcapture %}
            {% unless all_tags contains tag_entry %}
              {% assign all_tags = all_tags | push: tag_entry %}
            {% endunless %}
          {% endif %}
        {% endfor %}
      {% endif %}
    {% endfor %}

    {% assign categories = "" | split: "," %}
    {% for tag_entry in all_tags %}
      {% assign category = tag_entry | split: "|" | first %}
      {% unless categories contains category %}
        {% assign categories = categories | push: category %}
      {% endunless %}
    {% endfor %}

    {% for category in categories %}
      <div class="tag-group">
        <h4>{{ category }}</h4>
        <div class="tags-container">
          {% for tag_entry in all_tags %}
            {% assign parts = tag_entry | split: "|" %}
            {% if parts[0] == category %}
              <button class="tag-btn" data-tag="{{ tag_entry }}">
                {{ parts[1] }}
              </button>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    {% endfor %}
  </div>
</div>

<style>
.year-archive-sidebar-filter h3 { margin: 0 0 10px 0; }
.tag-group { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #e0e0e0; }
.tag-group h4 { margin: 0 0 8px 0; font-size: 0.95rem; }
.tags-container { display: flex; flex-wrap: wrap; gap: 5px; }
.tag-btn { padding: 4px 8px; background: #e9ecef; border: 1px solid #ced4da; border-radius: 12px; font-size: 0.85rem; cursor: pointer; }
.archive { margin-left: 300px; }
@media (max-width: 1024px) {
  .year-archive-sidebar-filter { position: static; width: 100%; margin-bottom: 20px; }
  .archive { margin-left: 0; }
}
</style>

{% for year_group in posts_by_year %}
  <section class="year-section">
    <h1 id="{{ year_group.name | slugify }}" class="archive__subtitle">{{ year_group.name }} ({{ year_group.items.size }})</h1>
    <div class="grid__wrapper">
      {% for post in year_group.items %}
        <article class="archive__item">
          <div class="archive__item-title">
            <a href="{{ base_path }}{{ post.url }}" rel="permalink">{{ post.covertitle }}</a>
          </div>
          <div class="page__meta">
            <i class="fa fa-calendar"></i>
            <time datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%B %d, %Y" }}</time>
          </div>
        </article>
      {% endfor %}
    </div>
  </section>
{% endfor %}






{% comment %}
<!--
 {% capture written_year %}'None'{% endcapture %}
{% for post in site.posts %}
  {% capture year %}{{ post.date | date: '%Y' }}{% endcapture %}
  {% if year != written_year %}
    <h2 id="{{ year | slugify }}" class="archive__subtitle">{{ year }}</h2>
    {% capture written_year %}{{ year }}{% endcapture %}
  {% endif %}

  {% include archive-single.html type="grid" %}
{% endfor %} -->
{% endcomment %}
